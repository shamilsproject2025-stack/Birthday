<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday ğŸ’•</title>

<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;600&display=swap" rel="stylesheet">

<style>
/* ===== BASE ===== */
body {
  margin: 0;
  height: 100vh;
  background: radial-gradient(circle at top,
  #8e2aa8,
  #2a082f 45%,
  #120014 75%);
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: 'Baloo 2', cursive;
  overflow: hidden;
}

/* ===== CARD ===== */
/* ===== CARD (DREAMY MATCHING STYLE) ===== */
.screen {
  background: linear-gradient(
    180deg,
    rgba(255, 120, 200, 0.18),
    rgba(30, 0, 40, 0.55)
  );
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);

  width: 80%;
  max-width: 320px;
  padding: 26px 22px 30px;
  border-radius: 28px;
  text-align: center;

  border: 1px solid rgba(255, 150, 220, 0.25);
  box-shadow:
    0 20px 50px rgba(0,0,0,0.45),
    inset 0 0 30px rgba(255,120,200,0.15);

  display: none;
  overflow: hidden;
}
.screen.active { display: block; }

/* ===== TEXT ===== */
h1 {
  color: #ff9ad5;
  margin: 14px 0 6px;
  font-size: 26px;
}
p {
  color: rgba(255,255,255,0.75);
  font-size: 14px;
  margin: 0;
}
.no-anim {
  opacity: 1 !important;
  animation: none !important;
  transform: none !important;
}

/* ===== BUTTON ===== */
button {
  margin-top: 20px;
  padding: 11px 26px;
  border: none;
  border-radius: 24px;
  background: linear-gradient(135deg, #ff8acb, #ff6fb1);
  color: white;
  font-size: 15px;
  cursor: pointer;
}

/* ===== DOODLES ===== */
.doodle { font-size: 44px; margin-bottom: 10px; }

/* ===== PHOTO ===== */
.photo {
  width: 200px;
  height: 200px;
  object-fit: cover;
  border-radius: 22px;
  border: 5px solid #ff9ccc;
  margin: 12px auto 6px;
  opacity: 0;
  transform: translateY(-120px) scale(0.7);
  animation: dropPop 1s cubic-bezier(.25,1.4,.5,1) forwards;
  animation-delay: 0.3s;
}
@keyframes dropPop {
  0% { opacity:0; transform:translateY(-120px) scale(0.7); }
  70% { opacity:1; transform:translateY(10px) scale(1.05); }
  100% { opacity:1; transform:translateY(0) scale(1); }
}

/* ===== CAKE SCREEN ===== */
.screen.cake-screen {
  background: linear-gradient(
    180deg,
    rgba(140, 80, 255, 0.25),
    rgba(40, 0, 60, 0.7)
  );
  min-height: 360px;
  color: #ffffff;
}

.cake-wrapper {
  position: relative;
  margin-top: 70px;
}

.cake {
  width: 200px;
  height: 120px;
  background: #ffb6d9;
  border-radius: 0 0 18px 18px;
  margin: 0 auto;
  position: relative;
  box-shadow: inset 0 -10px 0 #ff9ccc;
}
.cake::before {
  content:"";
  position:absolute;
  top:-20px;
  left: 0;
  right: 0;
  height:40px;
  background:#ffd6e8;
  border-radius:18px 18px 10px 10px;
}

.candles {
  position:absolute;
  top:-55px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:26px;
}
.candle {
  width:10px;
  height:34px;
  background:white;
  border-radius:5px;
  position:relative;
}
.flame {
  position:absolute;
  top:-18px;
  left:50%;
  width:14px;
  height:18px;
  background:radial-gradient(circle,#ffd966 40%,#ff9933 70%);
  border-radius:50%;
  transform:translateX(-50%);
  animation:flicker .15s infinite alternate;
}
@keyframes flicker {
  from { transform:translateX(-50%) scale(1); opacity:1; }
  to { transform:translateX(-50%) scale(.8); opacity:.85; }
}
.flame.off { animation:none; opacity:0; }

/* ===== SLIDESHOW ===== */
.slideshow {
  width: 240px;
  height: 320px;
  margin: 20px auto;
  border-radius: 22px;
  overflow: hidden;
  background: #fff;
  box-shadow: 0 12px 30px rgba(0,0,0,0.2);
}
.slideshow img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: opacity 0.8s ease;
}

.final-text {
  margin-top: 18px;
  font-size: 18px;
}
/* ===== HEARTS (ONLY SCREEN 2) ===== */
#screen2 {
  position: relative;
}

.hearts {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
  z-index: 0;
}

.heart {
  position: absolute;
  bottom: -20px;
  font-size: 18px;
  opacity: 0.8;
  animation: floatHeart 4s linear forwards;
}

@keyframes floatHeart {
  from {
    transform: translateY(0) scale(0.8);
    opacity: 0.9;
  }
  to {
    transform: translateY(-120%) scale(1.3);
    opacity: 0;
  }
}

/* keep content above hearts */
#screen2 > *:not(.hearts) {
  position: relative;
  z-index: 1;
}
  /* ===== TAP EMOJI EFFECT ===== */
.tap-emoji {
  position: absolute;
  font-size: 22px;
  pointer-events: none;
  animation: popFloat 1.2s ease-out forwards;
}

@keyframes popFloat {
  0% {
    transform: translate(-50%, -50%) scale(0.5);
    opacity: 0;
  }
  20% {
    opacity: 1;
    transform: translate(-50%, -60%) scale(1);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -120%) scale(1.4);
  }
}
  /* ===== FLOATING CARD EFFECT ===== */
@keyframes floatCard {
  0% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
  100% {
    transform: translateY(0);
  }
}

/* Apply floating only to visible screens */
.screen.active {
  animation: floatCard 6s ease-in-out infinite;
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .screen.active {
    animation: none;
  }
}
  /* ===== FINAL SCREEN DARK ROMANTIC THEME ===== */
#finalScreen {
  background: radial-gradient(circle at top,
    #8e2aa8,
    #2a082f 45%,
    #120014 75%);
  color: #ffffff;
}

/* soften text on dark bg */
#finalScreen p {
  color: rgba(255,255,255,0.75);
}
  /* ===== FLOATING BACKGROUND PARTICLES ===== */
.particles {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  overflow: hidden;
}


/* ===== FLOATING HEART PARTICLES ===== */
.heart-particle {
  position: absolute;
  font-size: 16px;
  opacity: 0.7;
  animation: floatHeartParticle linear infinite;
  filter: drop-shadow(0 0 8px rgba(255,120,200,0.6));
}

@keyframes floatHeartParticle {
  from {
    transform: translateY(110vh) scale(0.6);
    opacity: 0;
  }
  20% { opacity: 0.8; }
  to {
    transform: translateY(-20vh) scale(1.3);
    opacity: 0;
  }
}
@keyframes floatParticle {
  from {
    transform: translateY(110vh) scale(0.6);
    opacity: 0;
  }
  20% { opacity: 0.8; }
  to {
    transform: translateY(-20vh) scale(1.2);
    opacity: 0;
  }
}

/* Make sure cards stay above particles */
.screen {
  position: relative;
  z-index: 1;
}
  /* ===== SCREEN TRANSITION ===== */
.screen {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.6s ease, transform 0.6s ease;
}

.screen.active {
  opacity: 1;
  transform: translateY(0);
}
  /* ===== FADE TRANSITION LAYER ===== */
.screen {
  transition: opacity 0.5s ease, transform 0.5s ease;
}

.screen.fade-out {
  opacity: 0;
  transform: translateY(20px);
}

.screen.fade-in {
  opacity: 1;
  transform: translateY(0);
}
/* ===== MEMORY GALLERY ===== */
.gallery-scroll {
  max-height: 60vh;
  overflow-y: auto;
  padding-right: 6px;
}

.gallery-item {
  position: relative;
  margin-bottom: 18px;
  border-radius: 18px;
  overflow: hidden;
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.8s ease, transform 0.8s ease;
}

.gallery-item.visible {
  opacity: 1;
  transform: translateY(0);
}

.gallery-item img {
  width: 100%;
  height: 220px;
  object-fit: cover;
  filter: grayscale(100%) brightness(0.75);
}

.gallery-phrase {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: flex-end;
  padding: 14px;
  font-size: 14px;
  color: #fff;
  background: linear-gradient(
    to top,
    rgba(0,0,0,0.65),
    rgba(0,0,0,0.05)
  );
  font-style: italic;
  pointer-events: none;
}
/* ===== TAP TO COLOR REVEAL ===== */
.gallery-item img {
  transition: filter 0.8s ease, transform 0.6s ease;
}

.gallery-item.revealed img {
  filter: grayscale(0%) brightness(1);
  transform: scale(1.02);
}

.gallery-item.revealed {
  box-shadow:
    0 0 25px rgba(255,140,200,0.35),
    inset 0 0 20px rgba(255,120,200,0.15);
}
/* ===== IMAGE LIGHTBOX ===== */
.lightbox {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  backdrop-filter: blur(6px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2000;
}

.lightbox img {
  max-width: 90vw;
  max-height: 80vh;
  border-radius: 18px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.6);
  animation: zoomIn 0.4s ease;
}

.lightbox-close {
  position: absolute;
  top: 18px;
  right: 22px;
  font-size: 34px;
  color: white;
  cursor: pointer;
  font-weight: 300;
}

@keyframes zoomIn {
  from {
    transform: scale(0.85);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}
</style>
</head>

<body>
  <div class="particles"></div>

<audio id="bgMusic" loop>
  <source src="music/birthday.mp3" type="audio/mpeg">
</audio>

<!-- SCREEN 1 -->
<div class="screen active" id="screen1">
  <div class="doodle">ğŸ§¸ğŸˆ</div>
  <h1 class="no-anim">For My Love ğŸ’•</h1>
  <p class="no-anim">I made something for you</p>
  <button onclick="goToBirthday()">Click here</button>
</div>

<!-- SCREEN 2 -->
<div class="screen" id="screen2">
  <div class="hearts"></div>
  <div class="doodle">ğŸ‰ğŸŠ</div>
  <img src="images/him.jpg" class="photo">
  <h1>Happy Birthday Inchu ğŸ’–</h1>
  <p>You mean a lot to me</p>
  <p>Click here ğŸ‘‡ğŸ»</p>
  <button onclick="goToCake()">Thatâ€™s not it ğŸ‘€</button>
</div>

<!-- SCREEN 3 -->
<div class="screen cake-screen" id="screen3">
  <h1 class="no-anim">Make a wish âœ¨</h1>

  <div class="cake-wrapper">
    <div class="candles">
      <div class="candle"><div class="flame"></div></div>
      <div class="candle"><div class="flame"></div></div>
      <div class="candle"><div class="flame"></div></div>
    </div>
    <div class="cake"></div>
  </div>

  <p class="no-anim" id="statusText">Blow the candles ğŸ‚</p>
  <p>Click here ğŸ‘‡ğŸ»</p>
  <button onclick="startMic()">Iâ€™m ready ğŸ¤</button>
</div>

<!-- FINAL SCREEN -->
<div class="screen" id="finalScreen">
  <h1>For My Inchu ğŸ’–</h1>

  <div class="slideshow">
    <img id="slideImage" src="images/pic1.jpg">
  </div>

  <p class="final-text">Thank you for being mine ğŸ’—</p>
  <p> with love your paathu ğŸ’“</p>
</div>
<!-- MEMORY GALLERY SCREEN -->
<div class="screen" id="galleryScreen">
  <h1>Our Little Memories ğŸ¤</h1>

  <div class="gallery-scroll">
    <div class="gallery-item">
      <img src="images/pic1.jpg">
      <div class="gallery-phrase">Some moments quietly changed everything.</div>
    </div>

    <div class="gallery-item">
      <img src="images/pic2.jpg">
      <div class="gallery-phrase">You became comfort without trying.</div>
    </div>

    <div class="gallery-item">
      <img src="images/pic3.jpg">
      <div class="gallery-phrase">This smile still feels like home.</div>
    </div>

    <div class="gallery-item">
      <img src="images/pic4.jpg">
      <div class="gallery-phrase">Time slowed down here.</div>
    </div>

    <div class="gallery-item">
      <img src="images/pic5.jpg">
      <div class="gallery-phrase">Us â€” in the simplest way.</div>
    </div>

    <div class="gallery-item">
      <img src="images/pic6.jpg">
      <div class="gallery-phrase">Iâ€™d choose this memory again.</div>
    </div>

    <div class="gallery-item">
      <img src="images/pic7.jpg">
      <div class="gallery-phrase">Still you. Still my favorite.</div>
    </div>
  </div>

  <button onclick="closeGallery()">Back ğŸ’•</button>
</div>

<!-- MUSIC BUTTON (HIDDEN INITIALLY) -->
<button id="musicBtn" onclick="toggleMusic()"
style="
position: fixed;
top: 16px;
right: 16px;
z-index: 999;
background: linear-gradient(135deg, #ff8acb, #ff6fb1);
color: white;
border: none;
border-radius: 22px;
padding: 8px 14px;
font-size: 13px;
font-family: 'Baloo 2', cursive;
display: none;
align-items: center;
gap: 6px;
box-shadow: 0 6px 18px rgba(0,0,0,0.25);
">
ğŸ”Š Tap for music
</button>
<!-- GALLERY BUTTON -->
<button id="galleryBtn" onclick="openGallery()"
style="
position: fixed;
top: 16px;
left: 16px;
z-index: 999;
background: rgba(255,255,255,0.12);
color: #fff;
border: 1px solid rgba(255,255,255,0.25);
border-radius: 22px;
padding: 8px 14px;
font-size: 13px;
font-family: 'Baloo 2', cursive;
backdrop-filter: blur(8px);
display: none;
box-shadow: 0 6px 18px rgba(0,0,0,0.35);
">
ğŸ¤ Memories
</button>
<!-- IMAGE LIGHTBOX -->
<div id="lightbox" class="lightbox">
  <span class="lightbox-close">&times;</span>
  <img id="lightbox-img" src="">
</div>
<script>
  function switchScreen(from, to) {
  from.classList.add("fade-out");

  setTimeout(() => {
    from.classList.remove("active", "fade-out");
    to.classList.add("active", "fade-in");

    setTimeout(() => {
      to.classList.remove("fade-in");
    }, 500);

  }, 500); // must match CSS duration
  }
function goToBirthday() {
  switchScreen(screen1, screen2);
  startHearts();
}
function goToCake() {
  stopHearts();
  switchScreen(screen2, screen3);
}

/* ===== MIC ===== */
let audioContext, analyser, mic, micStream;
  let micActive = false;

function startMic() {
  statusText.innerText = "Listening... blow into mic now ğŸ’¨";
  micActive = true;

  navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {
    micStream = stream;
    audioContext = new AudioContext();
    analyser = audioContext.createAnalyser();
    mic = audioContext.createMediaStreamSource(stream);
    mic.connect(analyser);
    analyser.fftSize = 256;

    const data = new Uint8Array(analyser.frequencyBinCount);

    function detect() {
      if (!micActive) return;
      analyser.getByteFrequencyData(data);
      let volume = data.reduce((a,b)=>a+b) / data.length;
      if (volume > 40) blowOut();
      else requestAnimationFrame(detect);
    }
    detect();
  });
}

function blowOut() {
  // Turn off flames
  document.querySelectorAll(".flame").forEach(f => f.classList.add("off"));
  statusText.innerText = "Yay! ğŸ‰";

  // ğŸ”‡ STOP MICROPHONE COMPLETELY
  if (micStream) {
    micStream.getTracks().forEach(track => track.stop());
    micStream = null;
  }

  if (audioContext) {
    audioContext.close();
    audioContext = null;
  }

  // ğŸµ START MUSIC IMMEDIATELY
  bgMusic.volume = 0.25;
  bgMusic.play().catch(()=>{});

  setTimeout(showFinalSurprise, 1500);
}

/* ===== SLIDESHOW ===== */
const images = [
  "images/pic1.jpg",
  "images/pic2.jpg",
  "images/pic3.jpg",
  "images/pic4.jpg",
  "images/pic5.jpg",
  "images/pic6.jpg",
  "images/pic7.jpg"
];
let current = 0;

function startSlideshow() {
  const img = document.getElementById("slideImage");
  setInterval(() => {
    img.style.opacity = 0;
    setTimeout(() => {
      current = (current + 1) % images.length;
      img.src = images[current];
      img.style.opacity = 1;
    }, 400);
  }, 2500);
}

/* ===== MUSIC ===== */
const bgMusic = document.getElementById("bgMusic");
const musicBtn = document.getElementById("musicBtn");

function showFinalSurprise() {
 switchScreen(screen3, finalScreen); 

  
  musicBtn.style.display = "flex";

  startSlideshow();
}

function toggleMusic() {
  if (bgMusic.paused) {
    bgMusic.play();
    musicBtn.innerText = "ğŸ”Š";
  } else {
    bgMusic.pause();
    musicBtn.innerText = "ğŸ”‡";
  }
}
/* ===== HEARTS LOGIC (SCREEN 2 ONLY) ===== */
let heartInterval;

function startHearts() {
  const container = document.querySelector("#screen2 .hearts");

  heartInterval = setInterval(() => {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerText = "ğŸ’—";
    heart.style.left = Math.random() * 100 + "%";
    heart.style.fontSize = (14 + Math.random() * 10) + "px";

    container.appendChild(heart);

    setTimeout(() => heart.remove(), 4000);
  }, 350);
}

function stopHearts() {
  clearInterval(heartInterval);
  document.querySelector("#screen2 .hearts").innerHTML = "";
}
  /* ===== TAP EMOJI POP ===== */
const tapEmojis = ["ğŸ’—","ğŸ’–","ğŸ’•","âœ¨","ğŸ‰","ğŸ’“"];

document.addEventListener("click", (e) => {
  // only trigger on active screen
  const activeScreen = document.querySelector(".screen.active");
  if (!activeScreen) return;

  const emoji = document.createElement("div");
  emoji.className = "tap-emoji";
  emoji.innerText = tapEmojis[Math.floor(Math.random() * tapEmojis.length)];

  emoji.style.left = e.clientX + "px";
  emoji.style.top = e.clientY + "px";

  activeScreen.appendChild(emoji);

  setTimeout(() => emoji.remove(), 1200);
});
  /* ===== PARTICLE GENERATOR ===== */
const particleContainer = document.querySelector(".particles");

/* ===== HEART PARTICLE GENERATOR ===== */
const hearts = ["ğŸ’—","ğŸ’–","ğŸ’•","ğŸ’“"];

for (let i = 0; i < 28; i++) {
  const h = document.createElement("div");
  h.className = "heart-particle";
  h.innerText = hearts[Math.floor(Math.random() * hearts.length)];
  h.style.left = Math.random() * 100 + "vw";
  h.style.animationDuration = (12 + Math.random() * 18) + "s";
  h.style.animationDelay = Math.random() * 10 + "s";
  particleContainer.appendChild(h);
}
function openGallery() {
  switchScreen(finalScreen, galleryScreen);
}

function closeGallery() {
  switchScreen(galleryScreen, finalScreen);
}

/* Show gallery button only on final screen */
const observerFinal = new MutationObserver(() => {
  if (finalScreen.classList.contains("active")) {
    galleryBtn.style.display = "flex";
  } else {
    galleryBtn.style.display = "none";
  }
});
observerFinal.observe(finalScreen, { attributes: true });

/* Fade-in on scroll */
const galleryObserver = new IntersectionObserver(
  entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add("visible");
      }
    });
  },
  { threshold: 0.2 }
);

document.querySelectorAll(".gallery-item").forEach(item => {
  galleryObserver.observe(item);
});
/* ===== TAP TO COLOR REVEAL LOGIC ===== */
document.querySelectorAll(".gallery-item").forEach(item => {
  item.addEventListener("click", () => {
    item.classList.toggle("revealed");
  });
});
/* ===== LIGHTBOX LOGIC ===== */
const lightbox = document.getElementById("lightbox");
const lightboxImg = document.getElementById("lightbox-img");
const lightboxClose = document.querySelector(".lightbox-close");

document.querySelectorAll(".gallery-item img").forEach(img => {
  img.addEventListener("click", (e) => {
    e.stopPropagation(); // prevents tap effects
    lightboxImg.src = img.src;
    lightbox.style.display = "flex";
  });
});

lightboxClose.addEventListener("click", () => {
  lightbox.style.display = "none";
});

lightbox.addEventListener("click", (e) => {
  if (e.target === lightbox) {
    lightbox.style.display = "none";
  }
});
</script>

</body>
</html>
